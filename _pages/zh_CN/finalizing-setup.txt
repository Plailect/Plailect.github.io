---
title: "完成安装"
---

{% include toc title="目录内容" %}

### 必读事项

The file `boot.firm` is what is launched by boot9strap itself after it finishes loading off of NAND. In this case, we are using Luma3DS by [LumaTeam](https://github.com/LumaTeam/) to patch the device, allowing it to run homebrew software.

On this page, we will make critical system file backups and install the following homebrew programs:

+  **FBI** *(installs CIA formatted applications)*
+  **Anemone3DS（安装自定义主题）**
+ **Checkpoint（备份和恢复你 3DS/DS 的游戏存档）**
+  **Universal-Updater** *(a homebrew app store for downloading homebrew from the 3DS over Wi-Fi)*
+  **GodMode9（一款多功能工具，可以处理 NAND 和卡带的相关功能）**
+ **Homebrew Launcher Loader（启动 Homebrew Launcher 的快捷方式）**
+  **DSP1（允许自制程序播放音乐）**
+  **ctr-no-timeoffset** *(sets the Home Menu time to match the internal Real-Time Clock)*

It is not recommended to skip downloading any of these applications, as many of them will be used later on this page.
{: .notice--warning}

If your **New 3DS** was on firmware 2.1.0 before following this guide, you should [restore your NAND backup](godmode9-usage#restoring-a-nand-backup) before continuing.
{: .notice--warning}

If your previous CFW setup was EmuNAND-based and you wish to move the contents of your EmuNAND/RedNAND to SysNAND, follow [Move EmuNAND](move-emunand) before following this page. If you don't know what an EmuNAND is, this doesn't apply to you.
{: .notice--info}

### 你需要准备点啥？

* The latest release of [Anemone3DS](https://github.com/astronautlevel2/Anemone3DS/releases/latest) (get the `.cia` file)
* The v3.7.4 release of [Checkpoint](https://github.com/FlagBrew/Checkpoint/releases/tag/v3.7.4) (get the `.cia` file)
* The latest release of [Homebrew Launcher Wrapper](https://github.com/mariohackandglitch/homebrew_launcher_dummy/releases/latest) (get the `.cia` file)
* The latest release of [Universal-Updater](https://github.com/Universal-Team/Universal-Updater/releases/latest) (get the `.cia` file)

* The latest release of [ctr-no-timeoffset](https://github.com/ihaveamac/ctr-no-timeoffset/releases/latest) (get the `.3dsx` file)
* The latest release of [DSP1](https://github.com/zoogie/DSP1/releases/latest) (get the `.3dsx` file)

* The latest release of [FBI](https://github.com/Steveice10/FBI/releases/latest) (get both the `.cia` and `.3dsx` files)
* The latest release of [GodMode9](https://github.com/d0k3/GodMode9/releases/latest) (get the GodMode9 `.zip` file)

### 操作步骤

#### 第一步 – 准备工作

1. 将主机关机
1. 将你的 SD 卡插入电脑
1. 检查你的 SD 卡根目录是否有一个叫 `cias` 的文件夹，如果没有则手动新建一个
1. Copy all of the CIA files (`Anemone3DS.cia`, `Checkpoint.cia`, `FBI.cia`, `Homebrew_Launcher.cia`, and `Universal-Updater.cia`) to the `/cias/` folder on your SD card
1. 检查 SD 卡的根目录是否存在一个名为 `3ds` 的文件夹，如果没有则手动新建一个
    + 这个文件夹是用来存放 Homebrew 自制程序的；和主机自动生成的 `Nintendo 3DS` 文件夹无关。
1. Copy all of the 3DSX files (`ctr-no-timeoffset.3dsx`, `DSP1.3dsx`, and `FBI.3dsx`) to the `/3ds/` folder on your SD card
1. 如果 SD 卡的 `luma` 文件夹下没有一个名为 `payloads` 的文件夹，那么请新建一个
1. 将 GodMode9 `.zip` 中的 `GodMode9.firm` 复制到你SD卡的 `/luma/payloads/` 文件夹中
1. 将 GodMode9 `.zip` 中的整个 `gm9` 文件夹复制到 SD 卡的根目录下
1. 将 SD 卡重新插入主机
1. 启动你的主机

    ![]({{ "/images/screenshots/finalizing-root-layout.png" | absolute_url }})
    {: .notice--info}
    ![]({{ "/images/screenshots/godmode9-location.png" | absolute_url }})
    {: .notice--info}

#### 第二步 – 更新系统

1. 进入 “系统设置(System Settings)”，接着点击“其他设置(Other Settings)”，然后移动到最右边，点击“系统升级(System Update)”来升级你的主机
  + 你使用 B9S 和 Luma 时升级系统是安全的
  + 更新程序可能会提示“你的系统已经是最新了”而不会继续更新 如果你已经更新到了最新，这是正常的；请继续下一节
  + 如果在更新中途出错，请将主机的 DNS 设置改为 “auto(自动)”
  + 如果你仍然遇到了错误，请参考 [故障排查](troubleshooting#system-update-error-after-installing-cfw)

#### 第三步 – 进入 Homebrew Launcher

1. 启动“下载通信(Download Play)”程序 (![]({{ "/images/download-play-icon.png" | absolute_url }}){: height="24px" width="24px"})
1. 等到你看到 `Nintendo 3DS` 和 `Nintendo DS` 按钮
1. 同时按下 “L” + “↓” + “Select” 键来打开 Rosalina 菜单
1. 选择 “Miscellaneous options”
1. 选择 “Switch the hb. title to the current app.”
1. 按 “B” 键继续
1. 按 “B” 键返回 Rosalina 主菜单
1. 按 “B” 键退出 Rosalina 菜单
1. 按下 “Home” 键，然后关闭“下载通信(Download Play)”
1. 运行“下载通信(Download Play)”程序
1. 此时你的主机应该会启动Homebrew Launcher了

#### Section IV - RTC and DSP Setup
1. 从自制程序列表中运行 ctr-no-timeoffset
1. 按 “A” 键来将偏移设置为 0
  + （之后会设置）这个操作将把 RTC 日期和时间同步为系统时间
1. 按 “Start” 键返回到 Homebrew Launcher
1. 启动 DSP1 应用
1. Once it has completed, press (B) to self-delete the app and return to the Homebrew Launcher

#### Section V - Installing CIAs
1. 从自制程序列表中找到并启动 FBI
1. 进入到 `SD` -> `cias`
1. 选择 “\<current directory>”
1. 选择“安装和删除所有 CIA(Install and delete all CIAs)”选项，并按 “A” 键确认
1. 按下 “Home” 键，然后关闭“下载通信(Download Play)”

#### 第六步 – 将 Luma3DS 复制到 CTRNAND

1. 将主机关机
1. 按住 “START” 键，然后将主机开机。 这会启动 GodMode9
  + 如果没有进入 GodMode9，请确保 `GodMode9.firm` 放在了 `/luma/payloads/` 中，并确保 `payloads` 正确拼写。
1. 如果提示创建重要文件备份，按下 “A” 键确认，在完成后再次按下 “A” 键来继续。
1. 如果出现修复 RTC 日期与时间的提示，按 “A” 键执行修复，然后设置好日期和时间，并按 “A” 继续
1. 按下 “Home” 键来打开功能菜单
1. 选择 “Scripts...”
1. 选择 “GM9Megascript”
1. 选择 “Scripts from Plailect's Guide”
1. 选择 “Setup Luma3DS to CTRNAND”
1. 出现提示时，按 “A” 键继续
1. 按 “A” 键解锁SysNAND (lvl1) 写入权限，并根据屏幕上的提示依次按下按键
1. 按 “A” 键继续

#### 第七步 – 清理 SD 卡

1. 选择 “Cleanup SD Card”
1. 出现提示时，按 “A” 键继续
1. 按 “A” 键继续
1. 按 “B” 键返回到主菜单

#### 第七节 – 备份基础文件

1. 选择 “Backup Options”
1. 选择 “SysNAND Backup”
1. 按 “A” 确认
  + 此过程将花费一些时间
  + 如果你遇到了错误, 请确保你的 SD 卡上至少有 1.3GB 的可用空间
1. 按 “A” 键继续
1. 按 “B” 键返回到主菜单
1. 选择 “Dump Options”
1. 选择 “Dump Boot9.bin & Boot11.bin”
1. 出现提示时，按 “A” 键继续
1. 按 “A” 键继续
1. 按下 “B” 键返回到主菜单
1. 选择 “Exit”
1. 如果提示重新锁定写入权限，按下 “A” 键来确认
1. 进入到 `[S:] SYSNAND VIRTUAL`
1. 移动到 `essential.exefs` 上按 “A” 键选中
1. 选择 “Copy to 0:/gm9/out”
  + 如果你看到“Destination already exists（位置已存在文件）”，那么请移动到“Overwrite file(s)（覆盖文件）”然后按下 A 键。
1. 按 “A” 键继续
1. 按下 “Home” 键来打开功能菜单
1. 选择 “Poweroff system” 来将主机关机
1. 将你的 SD 卡插入到电脑
1. 从 `/gm9/out/` 复制 `<date>_<serialnumber>_sysnand_###.bin`、`<date>_<serialnumber>_sysnand_###.bin.sha`、`essential.exefs`、`<serialnumber>_boot9_###.bin` 和`<serialnumber>_boot11_###.bin` 到你电脑上安全的位置
  + 请在多处地方备份这些文件（比如网盘等）
  + 如果以后机器出现任何问题，这些备份文件将是为你提供修复砖机或从 NAND 镜像恢复文件的帮手
1. 将 `<date>_<serialnumber>_sysnand_###.bin` 和 `<date>_<serialnumber>_sysnand_###.bin.sha` 从你的 SD 卡的 `/gm9/out/` 文件夹中复制出后将其删除
1. 将 SD 卡重新插入你的主机
1. 启动你的主机

___

You're done! Custom firmware is now fully configured on your device.
{: .notice--success}

#### 信息与注意事项

{% capture notice-6 %}
Here are some keycombos that you should know:

- Holding (Select) on boot will launch the Luma3DS configuration menu.
- Holding (Start) on boot will launch GodMode9, or if you have multiple payloads in `/luma/payloads/`, the Luma3DS chainloader.
- By default, pressing (Left Shoulder) + (Down D-Pad) + (Select) while in 3DS mode will open the Rosalina menu, where you can check system information, take screenshots, enable cheats, and more. This can be changed from the Rosalina menu.
- Holding (Start) + (Select) + (X) on boot will dump `boot9.bin`, `boot11.bin`, and `otp.bin` to the `boot9strap` folder on your SD card.
{% endcapture %}

<div class="notice--info">{{ notice-6 | markdownify }}</div>

See [here](https://3ds.eiphax.tech/tips.html) for some suggestions on things to do with custom firmware.
{: .notice--info}

For information on using GodMode9's various features, check out the [GodMode9 Usage](godmode9-usage) and [Dumping Titles and Game Cartridges](dumping-titles-and-game-cartridges) pages.
{: .notice--info}